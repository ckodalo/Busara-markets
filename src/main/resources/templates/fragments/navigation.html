<!--
// v0 by Vercel.
// https://v0.dev/t/Cm7SBOSN6ju
-->

<header th:fragment="navigation" class="bg-gray-100 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 lg:px-6 h-16 flex items-center justify-between">
    <nav class="flex items-center gap-4 sm:gap-6">
        <a class="flex items-center gap-2 font-semibold text-gray-900 dark:text-gray-50" href="#">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="h-6 w-6"
            >
                <line x1="12" x2="12" y1="20" y2="10"></line>
                <line x1="18" x2="18" y1="20" y2="4"></line>
                <line x1="6" x2="6" y1="20" y2="16"></line>
            </svg>
            <span>Predictions</span>
        </a>
        <a class="text-sm font-medium hover:underline underline-offset-4 text-gray-600 dark:text-gray-400" href="#">
            Markets
        </a>
        <a class="text-sm font-medium hover:underline underline-offset-4 text-gray-600 dark:text-gray-400" href="#">
            Sports
        </a>
        <a class="text-sm font-medium hover:underline underline-offset-4 text-gray-600 dark:text-gray-400" href="#">
            Politics
        </a>
        <a class="text-sm font-medium hover:underline underline-offset-4 text-gray-600 dark:text-gray-400" href="#">
            Entertainment
        </a>
        <a class="text-sm font-medium hover:underline underline-offset-4 text-gray-600 dark:text-gray-400" href="#">
            Technology
        </a>
    </nav>
    <div class="flex items-center gap-4">
        <button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="h-5 w-5 text-gray-500 dark:text-gray-400"
            >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
            </svg>
            <span class="sr-only">Search</span>
        </button>
<!--        <span-->
<!--                class="relative flex shrink-0 overflow-hidden rounded-full h-9 w-9"-->
<!--                type="button"-->
<!--                id="radix-:r6:"-->
<!--                aria-haspopup="menu"-->
<!--                aria-expanded="false"-->
<!--                data-state="closed"-->
<!--        >-->
<!--      <span class="flex h-full w-full items-center justify-center rounded-full bg-muted">JP</span>-->
<!--      <span class="sr-only">Toggle </span>-->
<!--    </span>-->
        <!-- Conditional User Button -->
<!--        <div th:if="${user != null}" class="relative flex shrink-0 overflow-hidden rounded-full h-9 w-9">-->
<!--            <span class="flex h-full w-full items-center justify-center rounded-full bg-muted" sec:authentication="name">JP</span>-->
<!--            <span class="sr-only">User Menu</span>-->
<!--        </div>-->
<!--        <a th:if="${user == null}" th:href="@{/user/login}" class="text-sm font-medium text-gray-500 hover:text-gray-700">-->
<!--            Log In-->
<!--        </a>-->

        <!-- Display user information if authenticated -->

        <div sec:authorize="isAuthenticated()" class="relative">
            <div id="profileButton" class="relative flex shrink-0 overflow-hidden rounded-full h-9 w-9 cursor-pointer">
            <span class="flex h-full w-full items-center justify-center rounded-full bg-gray-200"
                  th:text="${#strings.substring(#authentication.name, 0, 2)}">U</span>
                <span class="sr-only">User Menu</span>
            </div>

            <!-- Dropdown Menu -->
            <div id="dropdownMenu" class="absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded-md shadow-lg z-50 hidden">
                <a th:href="@{/user/profile}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Profile</a>
                <form th:action="@{/logout}" method="post" class="inline w-full">
<!--                   <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>-->
                    <button type="submit" class="block w-full text-left px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Log Out
                    </button>
                </form>
            </div>
        </div>

        <!-- Display Log In link if not authenticated -->
        <a sec:authorize="isAnonymous()" th:href="@{/user/login}" class="text-sm font-medium text-gray-500 hover:text-gray-700">
            Log In
        </a>
    </div>

    <script>
        // JavaScript for toggling the dropdown menu
        document.addEventListener('DOMContentLoaded', function () {
            const profileButton = document.getElementById('profileButton');
            const dropdownMenu = document.getElementById('dropdownMenu');

            profileButton.addEventListener('click', function () {
                dropdownMenu.classList.toggle('hidden');
            });

            // Close the dropdown if clicked outside
            document.addEventListener('click', function (event) {
                if (!profileButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.classList.add('hidden');
                }
            });
        });
    </script>

</header>


